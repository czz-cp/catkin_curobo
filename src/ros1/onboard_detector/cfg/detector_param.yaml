localization_mode: 0 # 0: pose (default) 1: odom

# UR10e机械臂话题对接
depth_image_topic: /camera/depth/image_raw
aligned_depth_image_topic: /camera/depth/image_raw
color_image_topic: /camera/color/image_raw
pose_topic: /ur10e/tool0_pose  # 机械臂末端位姿（需要从tf计算）
odom_topic: /ur10e/base_odom   # 机械臂基座里程计（需要从joint_states计算）

# UR10e话题映射（直接从Universal_Robots_ROS_Driver）
robot_base_frame: "base_link"        # UR10e基座坐标系
robot_tool_frame: "tool0_controller" # UR10e工具坐标系
robot_tcp_frame: "tool0"             # UR10e TCP坐标系
joint_states_topic: "/joint_states"  # UR10e关节状态话题

# depth_image_topic: /camera/depth/image_rect_raw
# aligned_depth_image_topic: /camera/aligned_depth_to_color/image_raw
# pose_topic: /mavros/local_position/pose
# odom_topic: /vins_estimator/imu_propagate

# Camera Parameters - 机械臂Realsense D435i配置
depth_intrinsics: [386.22674560546875, 386.22674560546875, 317.3930969238281, 239.78431701660156] # fx,  fy, cx, cy realsense
# depth_intrinsics: [554.254691191187, 554.254691191187, 320.5, 240.5] # fx,  fy, cx, cy simulation
color_intrinsics: [608.08740234375, 608.08740234375, 317.48284912109375, 234.11557006835938] # intel realsense
# color_intrinsics: [554.254691191187, 554.254691191187, 320.5, 240.5] # fx,  fy, cx, cy simulation
depth_scale_factor: 1000 # 1000 for Intel Realsense Camera
# depth_scale_factor: 10 # simulation

# 机械臂工作范围参数（比无人机小）
depth_min_value: 0.3
depth_max_value: 2.0  # 机械臂工作距离较短
depth_filter_margin: 10 # filter
depth_skip_pixel: 2  # filter
image_cols: 640
image_rows: 480

# 机械臂眼在手上的配置
body_to_camera: [-0.08263826, -0.0410523, -0.00994019,  # 平移
                -0.000818298121, -0.00189235780, -0.386455281, 0.922305841,  # 旋转四元数
                0.0,  0.0,  0.0,  1.0]
body_to_camera_color: [-0.08263826, -0.0410523, -0.00994019,
                      -0.000818298121, -0.00189235780, -0.386455281, 0.922305841,
                      0.0,  0.0,  0.0,  1.0]



# Raycasting (max depth) - 机械臂工作范围较小
raycast_max_length: 2.0  # 机械臂最大工作距离

# time difference
time_difference: 0.033

# sensor data processing
voxel_occupied_thresh: 5 # min num of points for a voxel to be occupied in voxel filter

# dbscan - 机械臂环境参数调整
ground_height: 0.05 # height of ground to remove ground points (机械臂工作台通常较低)
dbscan_min_points_cluster: 15 # 机械臂环境物体较小，减少最小聚类点数
dbscan_search_range_epsilon: 0.08 # 机械臂环境精度要求更高

# bounding box filtering
filtering_BBox_IOU_threshold: 0.05
yolo_overwrite_distance: 10

# tracking and data association
history_size: 100 # size of tracking history. history[0] is current detection
prediction_size: 20 # size of prediction
similarity_threshold: 0.02 # similiary threshold for data association matching comparison
retrack_similarity_threshold: 0.015  # similiary threshold for retracking
fix_size_history_threshold: 10 # History threshold (num of frames) to fix box size
fix_size_dimension_threshold: 0.4 # dimension threshold (size of proportional) to fix box size

e_p: 0.25
e_q_pos: 0.01
e_q_vel: 0.05
e_q_acc: 0.05
e_r_pos: 0.04
e_r_vel: 0.3
e_r_acc: 0.6

kalman_filter_averaging_frames: 10

# classification - 机械臂环境动态检测参数
frame_skip: 3 # 机械臂环境变化较慢，减少跳过帧数
dynamic_velocity_threshold: 0.05  # 机械臂环境中物体速度较慢
dynamic_voting_threshold: 0.8
maximum_skip_ratio: 0.5 # the upper limit of points that are skipped(out of previous FOV) to be classfified as dynamic
frames_force_dynamic: 10 # Range of searching dynamic obstacles in box history
frames_force_dynamic_check_range: 30 # threshold for forcing dynamic obstacles
dynamic_consistency_threshold: 5 # obstacles being voted as dynamic for continuous k frames are eligible to be classified as dynamic

# constrain size - 机械臂环境物体尺寸
constrain_size: true
target_object_size: [0.3, 0.3, 0.8]  # 机械臂工作环境中物体通常较小